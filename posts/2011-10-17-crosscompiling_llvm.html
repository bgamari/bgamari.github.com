<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>bgamari.github.com - Cross-compiling LLVM for ARM on Ubuntu</title>
    <link rel="stylesheet" type="text/css" href="../css/default.css" />
    <link rel="stylesheet" type="text/css" href="../css/syntax.css" />
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  </head>
  <body>
    <div id="container">
      <div id="content">
        <div id="sidebar">
          <nav>
            <h1>Navigation</h1>
            <ul>
              <li><a href="../index.html">Home</a></li>
              <li><a href="../posts.html">Blog-like thing</a></li>
              <li><a href="../research-agenda.html">Research agenda</a></li>
              <li><a href="../publications.html">Publications</a></li>
              <li><a href="../past-research.html">Past research</a></li>
              <li><a href="../media/cv.pdf">Curriculum Vitæ</a></li>
            </ul>
            <h1>Related Links</h1>
            <ul>
              <li><a href="http://goldnerlab.physics.umass.edu/wiki/">Research group</a></li>
              <li><a href="http://www.github.com/bgamari">Github</a></li>
            </ul>
          </nav>
        </div>

        <section id="main">
        <h1 id="cross-compiling-llvm-for-arm-on-ubuntu">Cross-compiling LLVM for ARM on Ubuntu</h1>
<p>In my efforts to get the GHC compiler set running registerised on ARM, I found that I spent a large amount of time waiting for LLVM builds. To avoid this, I tried cross-compiling LLVM for my ARM target on my <code>x86_64</code> laptop.</p>
<p>Since we are cross-compiling, we will obviously need a cross-compiler on the build machine (assuming Ubuntu),</p>
<pre><code>    $ sudo apt-get install gcc-arm-linux-gnueabi</code></pre>
<p>Grab an LLVM tree,</p>
<pre><code>    $ git clone http://llvm.org/git/llvm.git
    $ cd llvm</code></pre>
<p>If you want clang, clone it in <code>tools/</code>,</p>
<pre><code>    $ cd tools
    $ git clone http://llvm.org/git/clang.git
    $ cd ..</code></pre>
<p>At the time of writing, there was an <a href="http://comments.gmane.org/gmane.comp.compilers.clang.devel/11458">issue</a> with the LLVM build system which precludes running <code>configure</code> from the root of the source tree. For this reason, we build within a build directory,</p>
<pre><code>    $ mkdir build
    $ cd build
    $ ../configure --prefix=/mnt/data/ghc/usr --host=arm-linux-gnueabi --target=arm-linux-gnueabi</code></pre>
<p>Building,</p>
<pre><code>    $ make</code></pre>
<p>And now we wait; go for a walk, water your cat, do some laundry, get several cups of coffee; whatever it is you’d spend an afternoon doing. Sadly even on a 2.2GHz Core 2, LLVM still takes several hours to build.</p>
        </section>
      </div>

      <footer id="footer">
        <span>Generated by <a href="http://jaspervdj.be/hakyll/index.html">Hakyll</a>.</span>
      </footer>
    </div>
  </body>
</html>

